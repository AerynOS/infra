services:
  # Legacy
  summit:
    image: serpentos/summit-legacy
    ports:
      - "5000:5000"
    volumes:
      - ./summit-legacy/state:/app/state
      - ./summit-legacy/seed.json:/app/seed.json
    user: ${MY_UID}:${MY_GID}
  vessel:
    image: serpentos/vessel-legacy
    ports:
      - "5001:5001"
    volumes:
      - ./vessel-legacy/state:/app/state
    user: ${MY_UID}:${MY_GID}
  avalanche:
    image: serpentos/avalanche-legacy
    ports:
      - "5002:5002"
    volumes:
      - ./avalanche-legacy/state:/app/state
    user: ${MY_UID}:${MY_GID}
  caddy:
    image: caddy:2
    ports: 
      - "5003:80"
    volumes:
      - ./vessel-legacy/state/public:/static
      - ./Caddyfile:/etc/caddy/Caddyfile
  # Rust
  # vessel:
  #   image: serpentos/vessel
  #   ports:
  #     - "5001:5001"
  #   volumes:
  #     - ./vessel:/state
  #   user: ${MY_UID}:${MY_GID}
